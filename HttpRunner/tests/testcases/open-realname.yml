- config:
    name: 实名认证开放服务
    variables:
        #测试环境
        # - open_realname: http://172.20.61.252:8380
        # - oid: 527b32be6568435ebdfc4412944906ac
        # - orgOid: 69ddbdf50bb84cdb963ee991c451d800
        # - projectId: '1111563841'
        # - Secret: 753b9f6acafcbba300315838be3374c1
        #生产环境
        # - open_realname: http://172.28.90.212:8080
        - open_realname: http://172.28.90.197:8080
        - oid: 268a277f68d04ed185f4c46b369452e0
        - orgOid: e5c41c013fb94b33ac13a8212f68d4bc
        - projectId: "1111565979"  
        - Secret: 5dc88da7786569d2879bd1bfbd5296ef
    request: 
        #生产环境
        base_url: http://172.28.90.210:8080
        headers:
            Content-Type: application/json
    
# - test:
#     name: 获取实名认证开放服务地址(个人)
#     request:
#         url: /getOpenRealnameUrl/model
#         method: POST
#         json:
#             oid: $oid
#             orgOid: $orgOid
#             projectId: $projectId
#             redirectUrl: "http://www.baidu.com"
#             realNameObject: 2
#             showResultPage": 1
#             notifyUrl:
#             type:
#     extract:
#         - url: content.data.url
#     validate:
#         - eq: [content.success, true]

# - test:
#     name: 获取实名认证开放服务地址(企业)
#     request:
#         url: $baseUrl/getOpenRealnameUrl/model
#         method: POST
#         json:
#             oid: $oid
#             orgOid: $orgOid 
#             projectId: $projectId
#             redirectUrl: "http://www.baidu.com"
#             realNameObject: 1
#             showResultPage": 1
#             notifyUrl:
#             type:
#     validate:
#         - eq: [content.success, true]

- test:
    name: 用户登录
    request:
        url: $open_realname/openrealname/login
        method: GET
        params: 
            param: 35pSrsMRLvgn80rilEX31mKeUwbVR4dnAWKzZyxEAdQtlKe9F7skJOUnajwESP6jlR4mQpW2%2FuJxnNpsX93UZH4NveBoeO4beu9pnAiE81J58%2BWj%2BYqkb4CnV5d07J%2FQpdn6OrxMfEysRMFgAzwmEyxJjHRNLadESdYBdA2Viis6Mw9ly0uiaryoXQwJ61PScLmDewYZoWtYG4Q2VfA4EQ%3D%3D
    extract: 
        - sessionId: content.sessionId
    validate:
        - eq: [content.data.userType, PERSON]

- test:
    name: 获取项目实名认证类型  
    parameters:
        - realNameObject: ["1","2"]
    request:
        url: $open_realname/openrealname/getRealnameType
        method: POST
        headers:
            sessionId: $sessionId
        json:
            realNameObject: $realNameObject
    validate:
        - eq: [content.message, 执行成功]
        - eq: [content.sessionId, $sessionId]

- test:
    name: 获取用户信息
    headers:
        sessionId: b11d5e2b-6fb0-4c47-a65c-22c1937a1673
    request:
        url: $open_realname/openrealname/getUserinfo
        headers:
            sessionId: $sessionId
        method: POST
    validate:
        - eq: [content.message, 执行成功]
        - eq: [content.sessionId, $sessionId] 

- test:
    name: 银行四要素信息比对(正确)
    request:
        url: $open_realname/openrealname/bankFourWithAuthCode
        method: POST
        headers:
            sessionId: $sessionId
        json:
            name: 
            idno:
            mobile: 15921427776
            cardno: 
    extract: 
        - serviceId: content.data.serviceId
    validate:
        - eq: [content.data.pass, true]

- test:
    name: 银行四要素信息比对--手机号/身份证-不正确
    parameters:
        - mobile-cardno:
            - ["15921427777", "6222021001101535349"]
            - ["15921427776", "14273019911003072X"]
    request:
        url: $open_realname/openrealname/bankFourWithAuthCode
        method: POST
        headers:
            sessionId: $sessionId
        json:
            name: 
            idno:
            mobile: $mobile
            cardno: $cardno
    validate:
        - eq: [content.message, 银行四要素验证失败]   

- test:
    name: 银行四要素短信验证码验证(正确)
    request:
        url: $open_realname/openrealname/validateAuthCode
        method: POST
        headers:
            sessionId: $sessionId
        json:
            serviceId: $serviceId
            code: 123456
    validate:
        - eq: [content.data.pass, true] 

- test:
    name: 银行四要素短信验证码验证--验证码错误
    request:
        url: $open_realname/openrealname/validateAuthCode
        method: POST
        headers:
            sessionId: $sessionId
        json:
            serviceId: $serviceId
            code: 654321
    validate:
        - eq: [content.message, 验证码校验失败]       
 
- test:
    name: 获取刷脸实名认证Url--（芝麻-需要手工刷脸）
    request:
        url: $open_realname/openrealname/faceAuthByUrl
        method: POST
        headers:
            sessionId: $sessionId
        json:
            name: 黄奇
            idno: 330902198803040677
            photo:
            photoType:
            gid:
            from: 
            faceAuthMode: 1
            callbackUrl: http://www.baidu.com
    validate:
        - eq: [content.success, true]

- test:
    name: 获取刷脸实名认证Url--（微众-需要手工刷脸）
    request:
        url: $open_realname/openrealname/faceAuthByUrl
        method: POST
        headers:
            sessionId: $sessionId
        json:
            name: 黄奇
            idno: 330902198803040677
            photo:
            photoType:
            gid:
            from: 
            faceAuthMode: 2
            callbackUrl: http://www.baidu.com

    validate:
        - eq: [content.success, true]

- test:
    name: 查询刷脸实名认证结果（保证接口通）
    request:
        url: $open_realname/openrealname/queryFaceAuthByUrlResult
        method: POST
        headers:
            sessionId: $sessionId
        json:
            serviceId: $serviceId
            needFile: true
    validate:
        - eq: [content.success, true]  

- test:
    name: 获取重定向地址
    headers:
        sessionId: $sessionId
    request:
        url: /openrealname/getRedirectUrl
        method: POST
        json:
    validate:
        - eq: [content.success, true]  

# - test:
#     name: 企业信息比对
#     headers:
#         sessionId: $sessionId
#     request:
#         url: /openrealname/orgInfoAuth
#         method: POST
#         json:
#             name: 
#             codeORG: null
#             codeREG: 330108000003512
#             codeUSC: 913301087458306077
#             legalName: 
#             agentName: 
#             agentIdno: 
#     validate:
#         - eq: [content.success, true]   

# - test:
#     name: 企业对公打款
#     headers:
#         sessionId: $sessionId
#     request:
#         url: /openrealname/toPay
#         method: POST
#         json:
#             serviceId: 
#             name: 杭州天谷信息科技有限公司
#             bank: 平安银行
#             cardno: 11003491675701
#             subbranch: 平安银行杭州高新支行
#             province: 浙江省
#             city: 杭州市
#             notifyUrl: http://openapi2.tsign.cn:8081/realname/rest/normal/notify/callback/llpay
#             prcptcd: 
#     validate:
#         - eq: [content.success, true]   

# - test:
#     name: 企业对公打款校验
#     headers:
#         sessionId: $sessionId
#     request:
#         url: /openrealname/payAuth
#         method: POST
#         json:
#             serviceId: 
#             cash: 
#     validate:
#         - eq: [content.success, true] 

# - test:
#     name: 获取个人手机号及类型
#     headers:
#         sessionId: $sessionId
#     request:
#         url: /openrealname/getMobileAndType
#         method: POST
#         json:
#     validate:
#         - eq: [content.success, true]

# - test:
#     name: 发送验证码
#     headers:
#         sessionId: $sessionId
#     request:
#         url: /openrealname/authcode/send
#         method: POST
#         json:
#             receiver: 15921427776
#             bizOperation: use for test
#     validate:
#         - eq: [content.success, true] 

# - test:
#     name: 校验验证码(正确)
#     headers:
#         sessionId: $sessionId
#     request:
#         url: /openrealname/authcode/validate
#         method: POST
#         json:
#             authCode: 123456
#     validate:
#         - eq: [content.success, true] 

# - test:
#     name: 校验验证码(错误)
#     headers:
#         sessionId: $sessionId
#     request:
#         url: /openrealname/authcode/validate
#         method: POST
#         json:
#             authCode: 000000
#     validate:
#         - eq: [content.success, true]                                                                
        
                                           


